--echo #
--echo # Range optimizer
--echo #

CREATE TABLE t1 (a UUID, INDEX(a));
SHOW CREATE TABLE t1;

DELIMITER $$;
FOR i IN 0..255
DO
  INSERT INTO t1 VALUES (CONCAT(REPEAT(0x00, 15),CHAR(i USING BINARY)));
END FOR
$$
DELIMITER ;$$

SELECT * FROM t1 WHERE a='00000000-0000-0000-0000-0000000000ff';
EXPLAIN SELECT * FROM t1 WHERE a='00000000-0000-0000-0000-0000000000ff';
SELECT * FROM t1 WHERE a='garbage';
EXPLAIN SELECT * FROM t1 WHERE a='garbage';

SELECT * FROM t1 WHERE a>='00000000-0000-0000-0000-0000000000fe';
EXPLAIN SELECT * FROM t1 WHERE a>='00000000-0000-0000-0000-0000000000fe';
SELECT * FROM t1 WHERE a>='garbage';
EXPLAIN SELECT * FROM t1 WHERE a>='garbage';

SELECT * FROM t1 WHERE a IN
(
 '00000000-0000-0000-0000-000000000080',
 '00000000-0000-0000-0000-0000000000a0',
 '00000000-0000-0000-0000-0000000000f0'
);
EXPLAIN SELECT * FROM t1 WHERE a IN
(
 '00000000-0000-0000-0000-000000000080',
 '00000000-0000-0000-0000-0000000000a0',
 '00000000-0000-0000-0000-0000000000f0'
);
SELECT * FROM t1 WHERE a IN
(
 '00000000-0000-0000-0000-000000000080',
 '00000000-0000-0000-0000-0000000000a0',
 'garbage'
);
EXPLAIN SELECT * FROM t1 WHERE a IN
(
 '00000000-0000-0000-0000-000000000080',
 '00000000-0000-0000-0000-0000000000a0',
 'garbage'
);

SELECT * FROM t1 WHERE a BETWEEN
  '00000000-0000-0000-0000-000000000080' AND
  '00000000-0000-0000-0000-000000000081';
EXPLAIN SELECT * FROM t1 WHERE a BETWEEN
  '00000000-0000-0000-0000-000000000080' AND
  '00000000-0000-0000-0000-000000000081';

SELECT * FROM t1 WHERE a BETWEEN
  '00000000-0000-0000-0000-000000000080' AND
  'garbage';
EXPLAIN SELECT * FROM t1 WHERE a BETWEEN
  '00000000-0000-0000-0000-000000000080' AND
  'garbage';

SELECT * FROM t1 WHERE a=CAST('00000000-0000-0000-0000-0000000000ff' AS UUID);
EXPLAIN EXTENDED SELECT * FROM t1 WHERE a=CAST('00000000-0000-0000-0000-0000000000ff' AS UUID);

DROP TABLE t1;
